<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Reviewing packages; how does it work?</title>
    <meta charset="utf-8" />
    <meta name="author" content="Lluís Revilla" />
    <script src="index_files/header-attrs-2.8/header-attrs.js"></script>
    <link href="index_files/remark-css-0.0.1/useR.css" rel="stylesheet" />
    <link href="index_files/remark-css-0.0.1/useR-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Reviewing packages; how does it work?
## ⚔<br/>xaringan with useR! template
### Lluís Revilla
### IDIBAPS, CIBEREHD
### 2021/05/30 (updated: 2021-06-03)

---


# Brief introduction



Goals of a *submission*

- Sharing something of quality that can be useful to others.
- Make it easier for others to build upon your package.
- Other: work, grant, prestige ...

--

.pull-left[
**Package reviews archives**

- CRAN

- Bioconductor

- rOpenSci

 ]
 
--

.pull-right[
**Objectives of the reviews?**

- Non-trivial publication quality packages.
- Promote high-quality, well documented and interoperable.
- Drive the adoption of best practices with useful, transparent and constructive feedback.
]


???

Differences in objectives but all looking for quality
CRAN: Point errors, comments
Bioconductor: In detail comment of style, classes, dependencies, structure…
rOpenSci: guideline for reviewers (about style, tests, functions, description, documentation, …)


CRAN ~16000 packages, Bioconductor ~2000,  rOpenSci ~300
To work with this slides use xaringan::infinite_moon_reader()

---

# Project differences


|          |CRAN                            |Bioconductor                       |rOpenSci               |
|:---------|:-------------------------------|:----------------------------------|:----------------------|
|Submit    |tar.gz file                     |fill an issue                      |fill an issue          |
|Setup     |None                            |ssh key, subscribe to mailing list |Setup CI tests         |
|Checks    |check --as-cran                 |check; Biocheck                    |check --as-cran        |
|OS        |Windows, Unix, iOS              |Windows, Unix, iOS                 |Windows, Unix, iOS     |
|Cycle     |Always open                     |2 annual releases                  |Always open            |
|Versions  |oldrel, release, patched, devel |release, devel                     |oldrel, release, devel |
|Review    |email &amp; ftp                     |Github                             |Github                 |
|Editors   |?                               |0                                  |~10                    |
|Reviewers |?                               |~10                                |Volunteers             |

???

The different projects/archives have different setups.
Will use data from the three projects

---

# Submissions


![](index_files/figure-html/submissions-1.png)&lt;!-- --&gt;

???

Submissions monthly

---
# By folder

![](index_files/figure-html/cran-holidays-1.png)&lt;!-- --&gt;

???

Newbies is where most effort goes/hareder
Pretest is resubmission (newer versions of packages) and also for newbies

---


# Holidays effect

![](index_files/figure-html/cran-holidays-zoom-1.png)&lt;!-- --&gt;


???
 
 2 months to get back to normal
 First served are the resubmissions of packages
 
 
---
# CRAN patterns


![](index_files/figure-html/cran-day-month-1.png)&lt;!-- --&gt;


---

# Review time

![](index_files/figure-html/cran-review-1.png)&lt;!-- --&gt;




???

Median time on submissions ~15 hours , mean time ~90 NA
Between 2 and 81 hours (quartiles)

---

# CRAN submission time

![](index_files/figure-html/cran-submission-time-1.png)&lt;!-- --&gt;

```
## # A tibble: 9,956 x 12
## # Groups:   package [6,056]
##    package   submission_n d          new       h newbies pretest inspect pending
##    &lt;chr&gt;            &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt; &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;
##  1 abess                1 2021-04-13 New      43      37       5       0       0
##  2 abglasso             1 2021-05-11 New      23      11       0      12       0
##  3 abn                  1 2020-10-22 Upda…    15       0       0      15       0
##  4 abn                  2 2020-11-16 Upda…    51       0       0      21      30
##  5 abn                  3 2021-04-21 Upda…    42       0       7      12      23
##  6 abtest               1 2020-11-12 Upda…     1       0       1       0       0
##  7 academic…            1 2021-05-10 New      23      22       0       0       0
##  8 accucor              1 2021-04-09 New      58      30       2      25       0
##  9 acebayes             1 2020-10-04 Upda…    22       0       0      22       0
## 10 aceEditor            1 2020-10-14 New     202     198       3       0       0
## # … with 9,946 more rows, and 3 more variables: publish &lt;int&gt;, waiting &lt;int&gt;,
## #   recheck &lt;int&gt;
```




???

New packages submissions are in ~81h, while resubmissions ~5h


```
## # A tibble: 2 x 2
##   new     time
##   &lt;chr&gt;  &lt;dbl&gt;
## 1 New       81
## 2 Update     5
```


use pkgsearch::cran_package_history("experDesign") for each package to know when a packages was added to CRAN. 

---

# Comments

How often do people comment and 

???


---

# Editors role

.pull-left[

![](index_files/figure-html/bioconductor-reviewers-1.png)&lt;!-- --&gt;

]

.pull-right[

![](index_files/figure-html/ropensci-editors-1.png)&lt;!-- --&gt;

]

???

Bioconductor reviewers do a lot
rOpenSci editors too

---

## Reviewers/Other people  role

.pull-left[

![](index_files/figure-html/users_commenters-1.png)&lt;!-- --&gt;

]

.pull-right[

![](index_files/figure-html/ros_comments-1.png)&lt;!-- --&gt;

]

???

Both organizations have a group of users involved on the package review system.
Even if Bioconductor doesn't explicitly ask for reviewers from the community.
Bioconductor are considering now how to improve the review system.
Omitted bots bioc-issue-bot and ropensci-review-bot (new March 2021).

---

## Bot role


![](index_files/figure-html/bioc-issue-bot-1.png)&lt;!-- --&gt;

???

Bot provides feedback of many issues and actions performed. 
Change/adaption with time

---

# Bioc bot differences

![](index_files/figure-html/bioc-issue-bot-approved-1.png)&lt;!-- --&gt;


---

# Timeline for submissions

CRAN: Not easy way to know

Bioconductor: 1 month

rOpenSci: around 2 months

???


rOpenSci: [Video](https://www.youtube.com/watch?v=iJnn_9xKkqk)

---

# Steps estimation time

---

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
